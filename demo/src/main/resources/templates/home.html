<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>집중 타이머</title>
  <style>
  
  
    
    body {
      background-color: #e6f0fa;
      font-family: 'Arial', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .timer-container {
      background-color: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 40px;
      text-align: center;
      width: 320px;
      display: none;
    }

    .circle {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto 20px;
    }

    .circle svg {
      transform: rotate(-90deg);
    }

    .circle-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .circle-text .label {
      font-size: 16px;
      color: #333;
    }

    .circle-text .time {
      font-size: 32px;
      color: #007bff;
      font-weight: bold;
    }

    .sun-info {
      font-size: 14px;
      color: #ff8800;
      margin-top: 6px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background-color: #eee;
      border-radius: 4px;
      margin: 20px 0;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      background-color: #007bff;
      width: 4%;
      border-radius: 4px;
    }

    .progress-label {
      font-size: 12px;
      color: #333;
      margin-bottom: 4px;
    }

    .buttons {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .buttons button {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    .pause { background-color: #f5deb3; }
    .timeset { background-color: #9370db; color: white; }
    .start { background-color: #dc3545; color: white; }
   
   
    .timer-box {
      background-color: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 30px;
      text-align: center;
      width: 320px;
      
    }

    .time-display {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .time-controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .time-controls button {
      font-size: 20px;
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .time-controls button:hover {
      background-color: #0056b3;
    }

    .break-info {
      font-size: 14px;
      color: #555;
      margin-bottom: 10px;
    }

    .checkbox-area {
      margin-bottom: 20px;
      font-size: 14px;
    }

    .checkbox-area input {
      margin-right: 6px;
    }

    .start-button {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .start-button:hover {
      background-color: #218838;
    }
  </style>
</head>

<body>



 <div class="timer-container" id="timercontainer">
    <div class="circle">
      <svg width="200" height="200">
        <circle cx="100" cy="100" r="90" stroke="#eee" stroke-width="10" fill="none" />
        <circle cx="100" cy="100" r="90" stroke="#007bff" stroke-width="10" fill="none"
                stroke-dasharray="565.48"
                stroke-dashoffset="543.86" />
      </svg>
      <div class="circle-text">
        <div class="label">타이머</div>
        <div class="time" id="timer">00:00:00</div>
      </div>
    </div>

    <div class="progress-label">0%</div>
    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>

    <div class="buttons">
      <button class="start">재생</button>
      <button class="pause">일시 정지</button>
      <button class="timeset">시간 설정</button>
    </div>
  </div>
  
  <div class="timer-box" id="timerbox">
    <div class="time-display" id="time">30분</div>

    <div class="time-controls">
      <button onclick="changeTime(-5)">-</button>
      <button onclick="changeTime(5)">+</button>
    </div>

    <button class="start-button" onclick="sessionstart()">집중 세션 시작</button>
  </div>

  <script>
    let time = 30;
    let maxtime = 30;
    let totalTime = 1 ;
    let timerInterval ;


    const timeDisplay = document.getElementById("time");
    const button = document.querySelector(".start").style.display = 'none';

    function sessionstart(){
    	document.getElementById("timerbox").style.display = "none";
    	document.getElementById("timercontainer").style.display = "block";
    	totalTime = maxtime*60;
    	currentTime = totalTime;
    	startTimer();
    }
    
    function changeTime(amount) {
     maxtime = time + amount
     if(maxtime >=240){ maxtime = 240 }
    
     time = Math.max(5, maxtime); // 최소 5분
     timeDisplay.textContent = `${time}분`;
     maxtime = time;
    }

  const timeDisplays = document.getElementById("timer");
  const progressFill = document.querySelector(".progress-fill");
  const progressLabel = document.querySelector(".progress-label");
  const circle = document.querySelector("svg circle:nth-child(2)");
  const timeout = document.querySelector(".sun-info");

  const circumference = 2 * Math.PI * 90; // r=90
  circle.setAttribute("stroke-dasharray", circumference);

  function formatTime(seconds) {
    const min = String(Math.floor(seconds / 60)).padStart(2, '0');
    const sec = String(seconds % 60).padStart(2, '0');
    return `${min}:${sec}`;
  }

  function updateUI() {
    timeDisplays.textContent = formatTime(currentTime);

    const percent = ((totalTime - currentTime) / totalTime) * 100;
    progressFill.style.width = `${percent}%`;
    progressLabel.textContent = `${Math.floor(percent)}%`;

    const offset = circumference * (1 - percent / 100);
    circle.setAttribute("stroke-dashoffset", offset);
  }
  
  var audio = new Audio("alarm-clock.mp3");

  function startTimer() {
    clearInterval(timerInterval);
    currentTime = totalTime;
    updateUI();

    timerInterval = setInterval(() => {
      currentTime--;
      updateUI();

      if (currentTime <= 0) {
    	  audio.play().then(() => {
    		  setTimeout(() => {
    			alert("타이머 종료!");
    		    audio.pause(); // ✅ 안전하게 일시정지
    		  }, 2000); // 1초 후에 일시정지
    		});
          
          clearInterval(timerInterval);
      }
    }, 1000);
  }
  function playTimer(){
	  const startbutton = document.querySelector(".start").style.display = 'none';
	  const pausebutton = document.querySelector(".pause").style.display = 'block';

	  
	  timerInterval = setInterval(() => {
	      currentTime--;
	      updateUI();

	      if (currentTime <= 0) {
	    	  audio.play().then(() => {
	    		  setTimeout(() => {
	    			alert("타이머 종료!");
	    		    audio.pause(); // ✅ 안전하게 일시정지
	    		  }, 2000); // 1초 후에 일시정지
	    		});
		        
		        clearInterval(timerInterval);
	      }
	   }, 1000);
  }

  
  function pauseTimer() {
	  clearInterval(timerInterval);
	  const startbutton = document.querySelector(".start").style.display = 'block';
	  const pausebutton = document.querySelector(".pause").style.display = 'none';
  }



  function timeset() {
	  clearInterval(timerInterval);
	  document.getElementById("timerbox").style.display = "block";
  	  document.getElementById("timercontainer").style.display = "none";
	  
  }
  document.querySelector(".start").addEventListener("click", playTimer);
  document.querySelector(".pause").addEventListener("click", pauseTimer);
  document.querySelector(".timeset").addEventListener("click", timeset);

  // 자동 시작
  
  
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6416003216944793"
     crossorigin="anonymous"></script>
  
</body>
</html>
